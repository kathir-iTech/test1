<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduPlatform - Interactive Educational SaaS</title>
    <style>
        :root {
            --primary: #4F46E5;
            --primary-hover: #4338CA;
            --secondary: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --background: #F9FAFB;
            --card-bg: #FFFFFF;
            --text: #111827;
            --text-light: #6B7280;
            --border: #E5E7EB;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Login Page */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .login-card {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 420px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h1 {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .login-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .login-tab {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border);
            background: white;
            cursor: pointer;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .login-tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background: #059669;
        }

        .btn-outline {
            background: white;
            border: 1px solid var(--border);
            color: var(--text);
        }

        .btn-outline:hover {
            background: var(--background);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 13px;
        }

        /* Main Layout */
        .app-layout {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 260px;
            background: var(--card-bg);
            border-right: 1px solid var(--border);
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--border);
        }

        .sidebar-header h2 {
            color: var(--primary);
            font-size: 24px;
        }

        .sidebar-nav {
            margin-top: 20px;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
            color: var(--text);
            font-size: 14px;
        }

        .nav-item:hover {
            background: var(--background);
        }

        .nav-item.active {
            background: rgba(79, 70, 229, 0.1);
            color: var(--primary);
            border-right: 3px solid var(--primary);
        }

        .main-content {
            margin-left: 260px;
            flex: 1;
            padding: 20px;
        }

        .header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 28px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* Dashboard Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 24px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .stat-card.success {
            border-left-color: var(--secondary);
        }

        .stat-card.warning {
            border-left-color: var(--warning);
        }

        .stat-card.danger {
            border-left-color: var(--danger);
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text);
        }

        .stat-change {
            font-size: 13px;
            margin-top: 8px;
            color: var(--secondary);
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            padding: 24px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
        }

        /* Grid Layouts */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .class-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .class-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .class-header {
            margin-bottom: 15px;
        }

        .class-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .class-meta {
            font-size: 13px;
            color: var(--text-light);
        }

        .class-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: var(--background);
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }

        tr:hover {
            background: var(--background);
        }

        /* Status Badges */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--secondary);
        }

        .badge-warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .badge-danger {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .badge-info {
            background: rgba(79, 70, 229, 0.1);
            color: var(--primary);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-light);
        }

        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--secondary);
            transition: width 0.3s;
        }

        /* Content Builder */
        .content-block {
            background: var(--background);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid var(--border);
        }

        .block-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .video-preview {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        /* Student Cards */
        .student-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border);
            transition: all 0.3s;
        }

        .student-card.status-green {
            border-left: 4px solid var(--secondary);
        }

        .student-card.status-yellow {
            border-left: 4px solid var(--warning);
        }

        .student-card.status-red {
            border-left: 4px solid var(--danger);
        }

        .student-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .student-stats {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--text-light);
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        select {
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
        }

        /* Real-time Monitor */
        .monitor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .monitor-card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s;
        }

        .monitor-card:hover {
            box-shadow: var(--shadow-lg);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .status-active {
            background: var(--secondary);
            box-shadow: 0 0 8px var(--secondary);
        }

        .status-idle {
            background: var(--warning);
        }

        .status-struggling {
            background: var(--danger);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Flashcard */
        .flashcard {
            width: 100%;
            max-width: 500px;
            aspect-ratio: 3/2;
            margin: 0 auto;
            perspective: 1000px;
        }

        .flashcard-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .flashcard-inner.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-front,
        .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 30px;
            font-size: 24px;
            font-weight: 600;
        }

        .flashcard-back {
            transform: rotateY(180deg);
        }

        /* Quiz Interface */
        .question-container {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .question-text {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .answer-option {
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .answer-option:hover {
            background: var(--background);
            border-color: var(--primary);
        }

        .answer-option.selected {
            background: rgba(79, 70, 229, 0.1);
            border-color: var(--primary);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            display: none;
            align-items: center;
            gap: 12px;
            z-index: 1001;
            border-left: 4px solid var(--secondary);
        }

        .toast.show {
            display: flex;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
            }
            to {
                transform: translateX(0);
            }
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .flex {
            display: flex;
        }

        .flex-between {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gap-10 {
            gap: 10px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
                z-index: 100;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 101;
                background: var(--primary);
                color: white;
                border: none;
                padding: 10px 15px;
                border-radius: 8px;
                cursor: pointer;
            }
        }

        .mobile-menu-btn {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <h1>üìö EduPlatform</h1>
                <p style="color: var(--text-light);">Welcome back! Please login to continue.</p>
            </div>

            <div class="login-tabs">
                <div class="login-tab active" onclick="switchLoginTab('teacher')">Teacher Login</div>
                <div class="login-tab" onclick="switchLoginTab('student')">Student Login</div>
            </div>

            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="loginEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
                </div>
                <div class="form-group" style="display: flex; align-items: center; gap: 8px;">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe" style="font-size: 14px;">Remember me</label>
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
                <div class="text-center mt-20">
                    <a href="#" style="color: var(--primary); font-size: 14px;">Forgot password?</a>
                </div>
            </form>

            <div class="mt-20">
                <p class="text-center" style="font-size: 14px; color: var(--text-light); margin-bottom: 10px;">Quick Demo Access:</p>
                <button class="btn btn-secondary" style="width: 100%; margin-bottom: 10px;" onclick="quickLogin('teacher')">Demo Teacher Account</button>
                <button class="btn btn-outline" style="width: 100%;" onclick="quickLogin('student')">Demo Student Account</button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
        
        <div class="app-layout">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h2>üìö EduPlatform</h2>
                    <p style="font-size: 12px; color: var(--text-light); margin-top: 5px;" id="userRole">Teacher Dashboard</p>
                </div>
                <nav class="sidebar-nav" id="teacherNav">
                    <div class="nav-item active" onclick="navigateTo('dashboard')">üìä Dashboard</div>
                    <div class="nav-item" onclick="navigateTo('classes')">üéì Class Management</div>
                    <div class="nav-item" onclick="navigateTo('lessonBuilder')">üìù Lesson Builder</div>
                    <div class="nav-item" onclick="navigateTo('quizCreator')">‚úèÔ∏è Quiz Creator</div>
                    <div class="nav-item" onclick="navigateTo('flashcardCreator')">üé¥ Flashcard Creator</div>
                    <div class="nav-item" onclick="navigateTo('assignments')">üìã Assignment Center</div>
                    <div class="nav-item" onclick="navigateTo('progress')">üìà Student Progress</div>
                    <div class="nav-item" onclick="navigateTo('reports')">üìä Reports</div>
                    <div class="nav-item" onclick="navigateTo('monitoring')">üëÅÔ∏è Real-time Monitor</div>
                    <div class="nav-item" onclick="navigateTo('settings')">‚öôÔ∏è Settings</div>
                    <div class="nav-item" onclick="logout()" style="margin-top: 20px; color: var(--danger);">üö™ Logout</div>
                </nav>
                <nav class="sidebar-nav hidden" id="studentNav">
                    <div class="nav-item active" onclick="navigateTo('studentDashboard')">üìä My Dashboard</div>
                    <div class="nav-item" onclick="navigateTo('myClasses')">üéì My Classes</div>
                    <div class="nav-item" onclick="navigateTo('myAssignments')">üìã My Assignments</div>
                    <div class="nav-item" onclick="navigateTo('studentProgress')">üìà My Progress</div>
                    <div class="nav-item" onclick="navigateTo('studentLesson')">üìñ Study Lesson</div>
                    <div class="nav-item" onclick="navigateTo('studentQuiz')">‚úèÔ∏è Take Quiz</div>
                    <div class="nav-item" onclick="navigateTo('studentFlashcards')">üé¥ Study Flashcards</div>
                    <div class="nav-item" onclick="logout()" style="margin-top: 20px; color: var(--danger);">üö™ Logout</div>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Header -->
                <div class="header">
                    <h1 id="pageTitle">Dashboard</h1>
                    <div class="user-info">
                        <span id="userName">Ms. Sarah Johnson</span>
                        <div class="avatar" id="userAvatar">SJ</div>
                    </div>
                </div>

                <!-- Dashboard View -->
                <div id="dashboardView" class="view">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Students</div>
                            <div class="stat-value">46</div>
                            <div class="stat-change">‚Üë 4 new this month</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Active Classes</div>
                            <div class="stat-value">2</div>
                            <div class="stat-change">Math 7A, Science 6C</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-label">Assignments Due</div>
                            <div class="stat-value">3</div>
                            <div class="stat-change">2 due this week</div>
                        </div>
                        <div class="stat-card danger">
                            <div class="stat-label">Average Performance</div>
                            <div class="stat-value">86%</div>
                            <div class="stat-change">‚Üë 3% from last month</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Recent Activity</h3>
                            </div>
                            <div id="activityFeed"></div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Quick Actions</h3>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <button class="btn btn-primary" onclick="navigateTo('lessonBuilder')">+ Create Lesson</button>
                                <button class="btn btn-secondary" onclick="navigateTo('quizCreator')">+ Create Quiz</button>
                                <button class="btn btn-outline" onclick="navigateTo('assignments')">üìã Assign Work</button>
                                <button class="btn btn-outline" onclick="navigateTo('monitoring')">üëÅÔ∏è Monitor Students</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Class Management View -->
                <div id="classesView" class="view hidden">
                    <div class="flex-between mb-20">
                        <h2>My Classes</h2>
                        <button class="btn btn-primary" onclick="openModal('createClassModal')">+ Create New Class</button>
                    </div>
                    <div class="grid" id="classesGrid"></div>
                </div>

                <!-- Lesson Builder View -->
                <div id="lessonBuilderView" class="view hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Create New Lesson</h2>
                            <div class="flex gap-10">
                                <button class="btn btn-outline btn-sm" onclick="previewLesson()">üëÅÔ∏è Preview</button>
                                <button class="btn btn-secondary btn-sm" onclick="saveDraft()">üíæ Save Draft</button>
                                <button class="btn btn-primary btn-sm" onclick="publishLesson()">üì§ Publish</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Lesson Title</label>
                            <input type="text" class="form-input" id="lessonTitle" placeholder="Enter lesson title">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label class="form-label">Subject</label>
                                <select class="form-input" id="lessonSubject">
                                    <option>Mathematics</option>
                                    <option>Science</option>
                                    <option>English</option>
                                    <option>History</option>
                                    <option>Reading</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Grade Level</label>
                                <select class="form-input" id="lessonGrade">
                                    <option>5</option>
                                    <option>6</option>
                                    <option>7</option>
                                    <option>8</option>
                                    <option>9</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Import Materials</label>
                                <button class="btn btn-outline" style="width: 100%;" onclick="importMaterials()">üìÅ Upload Files</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Description</label>
                            <textarea class="form-input" id="lessonDescription" rows="3" placeholder="Enter lesson description"></textarea>
                        </div>

                        <h3 style="margin: 20px 0;">Content Blocks</h3>
                        <div class="block-controls">
                            <button class="btn btn-sm btn-outline" onclick="addContentBlock('text')">üìù Add Text</button>
                            <button class="btn btn-sm btn-outline" onclick="addContentBlock('image')">üñºÔ∏è Add Image</button>
                            <button class="btn btn-sm btn-outline" onclick="addContentBlock('video')">üé• Add Video</button>
                            <button class="btn btn-sm btn-outline" onclick="addContentBlock('audio')">üéµ Add Audio</button>
                            <button class="btn btn-sm btn-outline" onclick="addContentBlock('pdf')">üìÑ Add PDF</button>
                        </div>

                        <div id="contentBlocksContainer"></div>

                        <h3 style="margin: 20px 0;">Student Accommodations</h3>
                        <div class="form-group">
                            <button class="btn btn-outline" onclick="openModal('accommodationsModal')">+ Add Accommodations for Students</button>
                        </div>
                    </div>
                </div>

                <!-- Quiz Creator View -->
                <div id="quizCreatorView" class="view hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Create New Quiz</h2>
                            <div class="flex gap-10">
                                <button class="btn btn-outline btn-sm" onclick="previewQuiz()">üëÅÔ∏è Preview</button>
                                <button class="btn btn-primary btn-sm" onclick="publishQuiz()">üì§ Publish Quiz</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Quiz Title</label>
                            <input type="text" class="form-input" id="quizTitle" placeholder="Enter quiz title">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label class="form-label">Subject</label>
                                <select class="form-input" id="quizSubject">
                                    <option>Mathematics</option>
                                    <option>Science</option>
                                    <option>English</option>
                                    <option>History</option>
                                    <option>Reading</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Time Limit (minutes)</label>
                                <input type="number" class="form-input" id="quizTimeLimit" value="20">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Randomize Questions</label>
                                <select class="form-input" id="quizRandomize">
                                    <option>Yes</option>
                                    <option>No</option>
                                </select>
                            </div>
                        </div>

                        <h3 style="margin: 20px 0;">Questions</h3>
                        <div class="block-controls">
                            <button class="btn btn-sm btn-outline" onclick="addQuestion('multiple')">Multiple Choice</button>
                            <button class="btn btn-sm btn-outline" onclick="addQuestion('trueFalse')">True/False</button>
                            <button class="btn btn-sm btn-outline" onclick="addQuestion('shortAnswer')">Short Answer</button>
                            <button class="btn btn-sm btn-outline" onclick="addQuestion('essay')">Essay</button>
                        </div>

                        <div id="questionsContainer"></div>

                        <h3 style="margin: 20px 0;">Accommodations</h3>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="quizAccommodations">
                                <span>Enable accommodations (extended time, read aloud, etc.)</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Flashcard Creator View -->
                <div id="flashcardCreatorView" class="view hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Create Flashcard Set</h2>
                            <button class="btn btn-primary btn-sm" onclick="publishFlashcards()">üì§ Publish Set</button>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Set Name</label>
                            <input type="text" class="form-input" id="flashcardSetName" placeholder="Enter flashcard set name">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label class="form-label">Subject</label>
                                <select class="form-input" id="flashcardSubject">
                                    <option>Mathematics</option>
                                    <option>Science</option>
                                    <option>English</option>
                                    <option>History</option>
                                    <option>Reading</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Topic</label>
                                <input type="text" class="form-input" id="flashcardTopic" placeholder="Enter topic">
                            </div>
                        </div>

                        <h3 style="margin: 20px 0;">Cards</h3>
                        <button class="btn btn-outline" onclick="addFlashcard()">+ Add Card</button>

                        <div id="flashcardsContainer" style="margin-top: 20px;"></div>
                    </div>
                </div>

                <!-- Assignment Center View -->
                <div id="assignmentsView" class="view hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Create Assignment</h2>
                            <button class="btn btn-primary btn-sm" onclick="assignWork()">üì§ Assign</button>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Assignment Type</label>
                            <select class="form-input" id="assignmentType" onchange="updateAssignmentOptions()">
                                <option value="lesson">Lesson</option>
                                <option value="quiz">Quiz</option>
                                <option value="flashcard">Flashcard Set</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Select Content</label>
                            <select class="form-input" id="assignmentContent"></select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Assign To</label>
                            <select class="form-input" id="assignTo" multiple style="height: 100px;">
                                <option value="C001">Math 7A (Entire Class)</option>
                                <option value="C002">Science 6C (Entire Class)</option>
                                <option value="S001">Alex Martinez</option>
                                <option value="S002">Emma Thompson</option>
                                <option value="S003">Liam Johnson</option>
                            </select>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label class="form-label">Due Date</label>
                                <input type="date" class="form-input" id="assignmentDueDate">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Priority</label>
                                <select class="form-input" id="assignmentPriority">
                                    <option>Normal</option>
                                    <option>High</option>
                                    <option>Urgent</option>
                                </select>
                            </div>
                        </div>

                        <h3 style="margin: 20px 0;">Student Accommodations</h3>
                        <div id="studentAccommodationsList"></div>
                    </div>

                    <div class="card mt-20">
                        <div class="card-header">
                            <h2 class="card-title">Active Assignments</h2>
                        </div>
                        <div class="table-container">
                            <table id="assignmentsTable"></table>
                        </div>
                    </div>
                </div>

                <!-- Student Progress View -->
                <div id="progressView" class="view hidden">
                    <div class="filters">
                        <div class="filter-group">
                            <label class="form-label">Class</label>
                            <select class="form-input" id="progressClassFilter" onchange="filterProgress()">
                                <option value="all">All Classes</option>
                                <option value="C001">Math 7A</option>
                                <option value="C002">Science 6C</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="form-label">Subject</label>
                            <select class="form-input" id="progressSubjectFilter" onchange="filterProgress()">
                                <option value="all">All Subjects</option>
                                <option>Mathematics</option>
                                <option>Science</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="form-label">Performance</label>
                            <select class="form-input" id="progressPerformanceFilter" onchange="filterProgress()">
                                <option value="all">All Students</option>
                                <option value="green">High Performers</option>
                                <option value="yellow">Average</option>
                                <option value="red">Needs Support</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid" id="studentProgressGrid"></div>
                </div>

                <!-- Reports View -->
                <div id="reportsView" class="view hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Generate Report</h2>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label class="form-label">Report Type</label>
                                <select class="form-input" id="reportType">
                                    <option>Class Performance</option>
                                    <option>Individual Student</option>
                                    <option>Subject Analysis</option>
                                    <option>Accommodation Usage</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Date Range</label>
                                <select class="form-input" id="reportDateRange">
                                    <option>Last 7 Days</option>
                                    <option>Last 30 Days</option>
                                    <option>Last Quarter</option>
                                    <option>This Year</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <button class="btn btn-primary" onclick="generateReport()">üìä Generate Report</button>
                        </div>
                    </div>

                    <div class="card mt-20" id="reportResults">
                        <div class="card-header">
                            <h2 class="card-title">Class Performance Report</h2>
                            <div class="flex gap-10">
                                <button class="btn btn-outline btn-sm" onclick="exportReport('pdf')">üìÑ Export PDF</button>
                                <button class="btn btn-outline btn-sm" onclick="exportReport('csv')">üìä Export CSV</button>
                                <button class="btn btn-outline btn-sm" onclick="shareReport()">üìß Share</button>
                            </div>
                        </div>
                        <div id="reportContent"></div>
                    </div>
                </div>

                <!-- Real-time Monitoring View -->
                <div id="monitoringView" class="view hidden">
                    <div class="card mb-20">
                        <div class="flex-between">
                            <h2>Live Classroom Activity</h2>
                            <div class="flex gap-10">
                                <span class="badge badge-success">24 Active Students</span>
                                <button class="btn btn-sm btn-outline" onclick="refreshMonitoring()">üîÑ Refresh</button>
                            </div>
                        </div>
                    </div>

                    <div class="monitor-grid" id="monitorGrid"></div>
                </div>

                <!-- Settings View -->
                <div id="settingsView" class="view hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Settings</h2>
                        </div>

                        <h3 style="margin-bottom: 15px;">Profile Information</h3>
                        <div class="form-group">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-input" value="Ms. Sarah Johnson">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" value="sjohnson@school.edu">
                        </div>

                        <h3 style="margin: 30px 0 15px;">Notification Preferences</h3>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked>
                                <span>Email notifications for new assignments</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked>
                                <span>Student progress alerts</span>
                            </label>
                        </div>

                        <h3 style="margin: 30px 0 15px;">Class Defaults</h3>
                        <div class="form-group">
                            <label class="form-label">Default Grading Scale</label>
                            <select class="form-input">
                                <option>A-F (90-80-70-60)</option>
                                <option>Percentage (0-100)</option>
                                <option>Pass/Fail</option>
                            </select>
                        </div>

                        <div class="form-group mt-20">
                            <button class="btn btn-primary">üíæ Save Settings</button>
                        </div>
                    </div>
                </div>

                <!-- Student Dashboard -->
                <div id="studentDashboardView" class="view hidden">
                    <div class="card mb-20" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <h2 style="color: white;">Welcome back, Alex! üëã</h2>
                        <p style="margin-top: 10px; opacity: 0.9;">You have 3 assignments due this week. Keep up the great work!</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">My Classes</div>
                            <div class="stat-value">1</div>
                            <div class="stat-change">Math 7A</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Completion Rate</div>
                            <div class="stat-value">92%</div>
                            <div class="stat-change">‚Üë 5% this week</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-label">Upcoming Assignments</div>
                            <div class="stat-value">3</div>
                            <div class="stat-change">2 due soon</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Average Grade</div>
                            <div class="stat-value">85%</div>
                            <div class="stat-change">B+ Average</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Upcoming Assignments</h3>
                            </div>
                            <div id="studentAssignmentsList"></div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">My Progress</h3>
                            </div>
                            <div id="studentProgressBars"></div>
                        </div>
                    </div>
                </div>

                <!-- Student Lesson View -->
                <div id="studentLessonView" class="view hidden">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title" id="studentLessonTitle">Introduction to Algebra</h2>
                            <div class="flex gap-10">
                                <button class="btn btn-outline btn-sm" onclick="prevLessonPage()">‚Üê Previous</button>
                                <span class="badge badge-info">Page 1 of 5</span>
                                <button class="btn btn-outline btn-sm" onclick="nextLessonPage()">Next ‚Üí</button>
                            </div>
                        </div>

                        <div id="lessonContentDisplay" style="min-height: 400px; padding: 20px;">
                            <h3>Understanding Variables</h3>
                            <p style="margin: 15px 0; line-height: 1.8;">In mathematics, a variable is a symbol that represents a number we don't know yet. It's like a placeholder or container that can hold different values.</p>
                            
                            <div class="video-preview" style="margin: 20px 0;">
                                <div>üé• Video: Introduction to Variables (5:30)</div>
                            </div>

                            <p style="margin: 15px 0; line-height: 1.8;">Variables are usually represented by letters like x, y, or z. For example, if x = 5, then x + 3 = 8.</p>

                            <div style="background: var(--background); padding: 20px; border-radius: 8px; margin: 20px 0;">
                                <h4>Practice Example:</h4>
                                <p style="margin-top: 10px;">If x = 7, what is x + 4?</p>
                            </div>
                        </div>

                        <div class="card-header" style="border-top: 1px solid var(--border); padding-top: 20px;">
                            <textarea class="form-input" placeholder="Take notes here..." rows="3"></textarea>
                            <div class="flex gap-10 mt-20">
                                <button class="btn btn-secondary" onclick="markLessonComplete()">‚úì Mark as Complete</button>
                                <button class="btn btn-outline" onclick="askTeacher()">‚ùì Ask Teacher</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Quiz View -->
                <div id="studentQuizView" class="view hidden">
                    <div class="card mb-20">
                        <div class="flex-between">
                            <h2>Algebra Basics Quiz</h2>
                            <div class="flex gap-10">
                                <span class="badge badge-warning">‚è±Ô∏è 15:30 remaining</span>
                                <span class="badge badge-info">Question 1 of 10</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-container">
                        <div class="question-text">
                            <strong>Question 1:</strong> What is the value of x if x + 5 = 12?
                        </div>

                        <div style="margin-top: 20px;">
                            <div class="answer-option" onclick="selectAnswer(this, 'A')">
                                <strong>A.</strong> 7
                            </div>
                            <div class="answer-option" onclick="selectAnswer(this, 'B')">
                                <strong>B.</strong> 17
                            </div>
                            <div class="answer-option" onclick="selectAnswer(this, 'C')">
                                <strong>C.</strong> 5
                            </div>
                            <div class="answer-option" onclick="selectAnswer(this, 'D')">
                                <strong>D.</strong> 12
                            </div>
                        </div>

                        <div class="flex gap-10 mt-20">
                            <button class="btn btn-outline">‚Üê Previous</button>
                            <button class="btn btn-primary">Next ‚Üí</button>
                            <button class="btn btn-secondary" style="margin-left: auto;">‚è∏Ô∏è Pause</button>
                            <button class="btn btn-danger" onclick="submitQuiz()">Submit Quiz</button>
                        </div>
                    </div>
                </div>

                <!-- Student Flashcards View -->
                <div id="studentFlashcardsView" class="view hidden">
                    <div class="card mb-20">
                        <div class="flex-between">
                            <h2>Math Formulas - Study Mode</h2>
                            <div class="flex gap-10">
                                <span class="badge badge-info">Card 3 of 15</span>
                                <button class="btn btn-sm btn-outline" onclick="shuffleFlashcards()">üîÄ Shuffle</button>
                            </div>
                        </div>
                    </div>

                    <div class="flashcard" onclick="flipCard()">
                        <div class="flashcard-inner" id="flashcardInner">
                            <div class="flashcard-front">
                                <div class="text-center">
                                    <p style="font-size: 18px; color: var(--text-light); margin-bottom: 20px;">Question</p>
                                    <p>What is the formula for the area of a circle?</p>
                                </div>
                            </div>
                            <div class="flashcard-back">
                                <div class="text-center">
                                    <p style="font-size: 18px; color: var(--text-light); margin-bottom: 20px;">Answer</p>
                                    <p>A = œÄr¬≤</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center" style="margin-top: 30px;">
                        <div class="progress-bar" style="max-width: 500px; margin: 0 auto 20px;">
                            <div class="progress-fill" style="width: 20%;"></div>
                        </div>
                        <div class="flex gap-10" style="justify-content: center;">
                            <button class="btn btn-outline" onclick="prevFlashcard()">‚Üê Previous</button>
                            <button class="btn btn-secondary" onclick="markMastered()">‚úì Mastered</button>
                            <button class="btn btn-outline" onclick="nextFlashcard()">Next ‚Üí</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <div id="createClassModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Create New Class</h3>
                <button class="close-btn" onclick="closeModal('createClassModal')">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Class Name</label>
                <input type="text" class="form-input" placeholder="e.g., Math 7A">
            </div>
            <div class="form-group">
                <label class="form-label">Subject</label>
                <select class="form-input">
                    <option>Mathematics</option>
                    <option>Science</option>
                    <option>English</option>
                    <option>History</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Grade Level</label>
                <input type="number" class="form-input" placeholder="Enter grade level">
            </div>
            <div class="form-group">
                <label class="form-label">Schedule</label>
                <input type="text" class="form-input" placeholder="e.g., Mon/Wed/Fri 9:00 AM">
            </div>
            <button class="btn btn-primary" onclick="createClass()">Create Class</button>
        </div>
    </div>

    <div id="accommodationsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Assign Accommodations</h3>
                <button class="close-btn" onclick="closeModal('accommodationsModal')">&times;</button>
            </div>
            <p style="margin-bottom: 20px; color: var(--text-light);">Select students and assign specific accommodations.</p>
            <div id="accommodationsStudentList"></div>
            <button class="btn btn-primary mt-20" onclick="saveAccommodations()">Save Accommodations</button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toastMessage">Action completed successfully!</span>
    </div>

    <script>
        // Application State
        let currentUser = null;
        let currentView = 'dashboard';
        let loginType = 'teacher';
        let contentBlocks = [];
        let questions = [];
        let flashcards = [];

        // Sample Data
        const teachers = [
            { id: 'T001', name: 'Ms. Sarah Johnson', email: 'sjohnson@school.edu', subjects: ['Math', 'Science'], classes: ['C001', 'C002'] },
            { id: 'T002', name: 'Mr. David Chen', email: 'dchen@school.edu', subjects: ['English', 'History'], classes: ['C003', 'C004'] },
            { id: 'T003', name: 'Mrs. Emily Rodriguez', email: 'erodriguez@school.edu', subjects: ['Reading', 'Science'], classes: ['C005'] }
        ];

        const students = [
            { id: 'S001', name: 'Alex Martinez', grade: 7, classes: ['C001'], accommodations: ['Extended Time'], avgGrade: 85, completionRate: 92 },
            { id: 'S002', name: 'Emma Thompson', grade: 7, classes: ['C001'], accommodations: [], avgGrade: 94, completionRate: 98 },
            { id: 'S003', name: 'Liam Johnson', grade: 6, classes: ['C002'], accommodations: ['Audio Support', 'Visual Aids'], avgGrade: 78, completionRate: 88 },
            { id: 'S004', name: 'Olivia Brown', grade: 8, classes: ['C003'], accommodations: ['Simplified Instructions'], avgGrade: 82, completionRate: 90 },
            { id: 'S005', name: 'Noah Davis', grade: 9, classes: ['C004'], accommodations: [], avgGrade: 91, completionRate: 96 },
            { id: 'S006', name: 'Sophia Wilson', grade: 7, classes: ['C001'], accommodations: ['Extended Time'], avgGrade: 88, completionRate: 95 },
            { id: 'S007', name: 'Mason Garcia', grade: 6, classes: ['C002'], accommodations: [], avgGrade: 92, completionRate: 97 },
            { id: 'S008', name: 'Isabella Lee', grade: 7, classes: ['C001'], accommodations: ['Visual Aids'], avgGrade: 79, completionRate: 85 }
        ];

        const classes = [
            { id: 'C001', name: 'Math 7A', subject: 'Mathematics', grade: 7, teacher: 'T001', studentCount: 24, schedule: 'Mon/Wed/Fri 9:00 AM' },
            { id: 'C002', name: 'Science 6C', subject: 'Science', grade: 6, teacher: 'T001', studentCount: 22, schedule: 'Tue/Thu 10:30 AM' },
            { id: 'C003', name: 'English 8B', subject: 'English', grade: 8, teacher: 'T002', studentCount: 26, schedule: 'Mon/Wed/Fri 11:00 AM' },
            { id: 'C004', name: 'History 9A', subject: 'History', grade: 9, teacher: 'T002', studentCount: 20, schedule: 'Tue/Thu 1:00 PM' },
            { id: 'C005', name: 'Reading 5B', subject: 'Reading', grade: 5, teacher: 'T003', studentCount: 18, schedule: 'Mon/Wed/Fri 8:00 AM' }
        ];

        const lessons = [
            { id: 'L001', title: 'Introduction to Algebra', subject: 'Math', grade: 7, contentBlocks: ['Text', 'Video', 'Practice Problems'] },
            { id: 'L002', title: 'The Water Cycle', subject: 'Science', grade: 6, contentBlocks: ['Text', 'Image', 'Interactive Diagram', 'Video'] },
            { id: 'L003', title: 'Literary Analysis Techniques', subject: 'English', grade: 8, contentBlocks: ['Text', 'PDF', 'Example Analysis'] }
        ];

        const quizzes = [
            { id: 'Q001', title: 'Algebra Basics Quiz', subject: 'Math', questionCount: 10, timeLimit: 20, avgScore: 82 },
            { id: 'Q002', title: 'Water Cycle Assessment', subject: 'Science', questionCount: 15, timeLimit: 25, avgScore: 88 },
            { id: 'Q003', title: 'Grammar Check', subject: 'English', questionCount: 12, timeLimit: 15, avgScore: 79 }
        ];

        const flashcardSets = [
            { id: 'F001', name: 'Vocabulary Week 5', subject: 'English', cardCount: 20 },
            { id: 'F002', name: 'Math Formulas', subject: 'Math', cardCount: 15 },
            { id: 'F003', name: 'Science Terms', subject: 'Science', cardCount: 25 }
        ];

        const assignments = [
            { id: 'A001', title: 'Algebra Intro Lesson', type: 'Lesson', class: 'Math 7A', dueDate: '2025-11-20', status: 'In Progress', completion: 75 },
            { id: 'A002', title: 'Water Cycle Quiz', type: 'Quiz', class: 'Science 6C', dueDate: '2025-11-19', status: 'Completed', completion: 100 },
            { id: 'A003', title: 'Vocabulary Practice', type: 'Flashcard', class: 'Math 7A', dueDate: '2025-11-22', status: 'Not Started', completion: 0 }
        ];

        const accommodationTypes = [
            'Extended Time (+50%)',
            'Audio Support',
            'Simplified Instructions',
            'Visual Aids',
            'Frequent Breaks',
            'Reduced Distractions',
            'Read Aloud',
            'Large Print'
        ];

        // Login Functions
        function switchLoginTab(type) {
            loginType = type;
            const tabs = document.querySelectorAll('.login-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
        }

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            
            if (loginType === 'teacher') {
                currentUser = teachers.find(t => t.email === email) || teachers[0];
            } else {
                currentUser = students[0];
            }
            
            login();
        });

        function quickLogin(type) {
            loginType = type;
            if (type === 'teacher') {
                currentUser = teachers[0];
            } else {
                currentUser = students[0];
            }
            login();
        }

        function login() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            if (loginType === 'teacher') {
                document.getElementById('teacherNav').classList.remove('hidden');
                document.getElementById('studentNav').classList.add('hidden');
                document.getElementById('userRole').textContent = 'Teacher Dashboard';
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userAvatar').textContent = currentUser.name.split(' ').map(n => n[0]).join('');
                navigateTo('dashboard');
            } else {
                document.getElementById('teacherNav').classList.add('hidden');
                document.getElementById('studentNav').classList.remove('hidden');
                document.getElementById('userRole').textContent = 'Student Dashboard';
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userAvatar').textContent = currentUser.name.split(' ').map(n => n[0]).join('');
                navigateTo('studentDashboard');
            }
            
            initializeDashboard();
        }

        function logout() {
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            currentUser = null;
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // Navigation
        function navigateTo(view) {
            // Hide all views
            document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
            
            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            // Show selected view
            const viewMap = {
                'dashboard': 'dashboardView',
                'classes': 'classesView',
                'lessonBuilder': 'lessonBuilderView',
                'quizCreator': 'quizCreatorView',
                'flashcardCreator': 'flashcardCreatorView',
                'assignments': 'assignmentsView',
                'progress': 'progressView',
                'reports': 'reportsView',
                'monitoring': 'monitoringView',
                'settings': 'settingsView',
                'studentDashboard': 'studentDashboardView',
                'myClasses': 'myClassesView',
                'studentLesson': 'studentLessonView',
                'studentQuiz': 'studentQuizView',
                'studentFlashcards': 'studentFlashcardsView'
            };
            
            const viewElement = document.getElementById(viewMap[view]);
            if (viewElement) {
                viewElement.classList.remove('hidden');
            }
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'classes': 'Class Management',
                'lessonBuilder': 'Lesson Builder',
                'quizCreator': 'Quiz Creator',
                'flashcardCreator': 'Flashcard Creator',
                'assignments': 'Assignment Center',
                'progress': 'Student Progress',
                'reports': 'Reports',
                'monitoring': 'Real-time Monitoring',
                'settings': 'Settings',
                'studentDashboard': 'My Dashboard',
                'studentLesson': 'Study Lesson',
                'studentQuiz': 'Take Quiz',
                'studentFlashcards': 'Study Flashcards'
            };
            
            document.getElementById('pageTitle').textContent = titles[view] || 'Dashboard';
            
            // Highlight active nav item
            event?.target?.classList.add('active');
            
            currentView = view;
            
            // Initialize view-specific content
            if (view === 'classes') initializeClasses();
            if (view === 'assignments') initializeAssignments();
            if (view === 'progress') initializeProgress();
            if (view === 'monitoring') initializeMonitoring();
            if (view === 'reports') initializeReports();
            if (view === 'studentDashboard') initializeStudentDashboard();
        }

        // Initialize Dashboard
        function initializeDashboard() {
            const activityFeed = document.getElementById('activityFeed');
            if (activityFeed) {
                activityFeed.innerHTML = `
                    <div style="padding: 15px; border-bottom: 1px solid var(--border);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <strong>Emma Thompson</strong>
                            <span style="font-size: 12px; color: var(--text-light);">2 hours ago</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light);">Completed "Algebra Basics Quiz" with 96%</p>
                    </div>
                    <div style="padding: 15px; border-bottom: 1px solid var(--border);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <strong>Alex Martinez</strong>
                            <span style="font-size: 12px; color: var(--text-light);">4 hours ago</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light);">Started "Introduction to Algebra" lesson</p>
                    </div>
                    <div style="padding: 15px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <strong>Liam Johnson</strong>
                            <span style="font-size: 12px; color: var(--text-light);">5 hours ago</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light);">Submitted homework assignment</p>
                    </div>
                `;
            }
        }

        // Initialize Classes View
        function initializeClasses() {
            const grid = document.getElementById('classesGrid');
            const userClasses = loginType === 'teacher' ? classes.filter(c => c.teacher === currentUser.id) : [];
            
            grid.innerHTML = userClasses.map(cls => `
                <div class="class-card">
                    <div class="class-header">
                        <div class="class-name">${cls.name}</div>
                        <div class="class-meta">${cls.subject} ‚Ä¢ Grade ${cls.grade}</div>
                    </div>
                    <div style="margin: 15px 0;">
                        <div style="font-size: 14px; color: var(--text-light); margin-bottom: 5px;">üë• ${cls.studentCount} students</div>
                        <div style="font-size: 14px; color: var(--text-light);">üìÖ ${cls.schedule}</div>
                    </div>
                    <div class="class-actions">
                        <button class="btn btn-sm btn-primary" onclick="viewClass('${cls.id}')">View</button>
                        <button class="btn btn-sm btn-outline" onclick="editClass('${cls.id}')">Edit</button>
                        <button class="btn btn-sm btn-outline">Export</button>
                    </div>
                </div>
            `).join('');
        }

        // Content Builder Functions
        function addContentBlock(type) {
            const container = document.getElementById('contentBlocksContainer');
            const blockId = Date.now();
            
            let blockHTML = '';
            
            if (type === 'text') {
                blockHTML = `
                    <div class="content-block" id="block-${blockId}">
                        <div class="flex-between mb-20">
                            <strong>üìù Text Block</strong>
                            <button class="btn btn-sm btn-outline" onclick="removeBlock(${blockId})">Remove</button>
                        </div>
                        <textarea class="form-input" rows="4" placeholder="Enter text content..."></textarea>
                    </div>
                `;
            } else if (type === 'video') {
                blockHTML = `
                    <div class="content-block" id="block-${blockId}">
                        <div class="flex-between mb-20">
                            <strong>üé• Video Block</strong>
                            <button class="btn btn-sm btn-outline" onclick="removeBlock(${blockId})">Remove</button>
                        </div>
                        <input type="text" class="form-input" placeholder="Enter YouTube or Vimeo URL">
                        <div class="video-preview" style="margin-top: 15px;">Video Preview</div>
                    </div>
                `;
            } else if (type === 'image') {
                blockHTML = `
                    <div class="content-block" id="block-${blockId}">
                        <div class="flex-between mb-20">
                            <strong>üñºÔ∏è Image Block</strong>
                            <button class="btn btn-sm btn-outline" onclick="removeBlock(${blockId})">Remove</button>
                        </div>
                        <input type="file" class="form-input" accept="image/*">
                    </div>
                `;
            } else if (type === 'audio') {
                blockHTML = `
                    <div class="content-block" id="block-${blockId}">
                        <div class="flex-between mb-20">
                            <strong>üéµ Audio Block</strong>
                            <button class="btn btn-sm btn-outline" onclick="removeBlock(${blockId})">Remove</button>
                        </div>
                        <input type="file" class="form-input" accept="audio/*">
                    </div>
                `;
            } else if (type === 'pdf') {
                blockHTML = `
                    <div class="content-block" id="block-${blockId}">
                        <div class="flex-between mb-20">
                            <strong>üìÑ PDF Block</strong>
                            <button class="btn btn-sm btn-outline" onclick="removeBlock(${blockId})">Remove</button>
                        </div>
                        <input type="file" class="form-input" accept=".pdf">
                    </div>
                `;
            }
            
            container.insertAdjacentHTML('beforeend', blockHTML);
            contentBlocks.push({ id: blockId, type: type });
            showToast(`${type.charAt(0).toUpperCase() + type.slice(1)} block added`);
        }

        function removeBlock(blockId) {
            document.getElementById(`block-${blockId}`).remove();
            contentBlocks = contentBlocks.filter(b => b.id !== blockId);
            showToast('Block removed');
        }

        // Quiz Functions
        function addQuestion(type) {
            const container = document.getElementById('questionsContainer');
            const qId = Date.now();
            
            let questionHTML = '';
            
            if (type === 'multiple') {
                questionHTML = `
                    <div class="content-block" id="question-${qId}">
                        <div class="flex-between mb-20">
                            <strong>Multiple Choice Question</strong>
                            <button class="btn btn-sm btn-outline" onclick="removeQuestion(${qId})">Remove</button>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Question Text</label>
                            <textarea class="form-input" rows="2" placeholder="Enter your question"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Options</label>
                            <input type="text" class="form-input" placeholder="Option A" style="margin-bottom: 10px;">
                            <input type="text" class="form-input" placeholder="Option B" style="margin-bottom: 10px;">
                            <input type="text" class="form-input" placeholder="Option C" style="margin-bottom: 10px;">
                            <input type="text" class="form-input" placeholder="Option D">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Correct Answer</label>
                            <select class="form-input">
                                <option>A</option>
                                <option>B</option>
                                <option>C</option>
                                <option>D</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Points</label>
                            <input type="number" class="form-input" value="1">
                        </div>
                    </div>
                `;
            } else if (type === 'trueFalse') {
                questionHTML = `
                    <div class="content-block" id="question-${qId}">
                        <div class="flex-between mb-20">
                            <strong>True/False Question</strong>
                            <button class="btn btn-sm btn-outline" onclick="removeQuestion(${qId})">Remove</button>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Question Text</label>
                            <textarea class="form-input" rows="2" placeholder="Enter your question"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Correct Answer</label>
                            <select class="form-input">
                                <option>True</option>
                                <option>False</option>
                            </select>
                        </div>
                    </div>
                `;
            } else if (type === 'shortAnswer') {
                questionHTML = `
                    <div class="content-block" id="question-${qId}">
                        <div class="flex-between mb-20">
                            <strong>Short Answer Question</strong>
                            <button class="btn btn-sm btn-outline" onclick="removeQuestion(${qId})">Remove</button>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Question Text</label>
                            <textarea class="form-input" rows="2" placeholder="Enter your question"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Sample Answer (for grading reference)</label>
                            <textarea class="form-input" rows="2" placeholder="Enter sample answer"></textarea>
                        </div>
                    </div>
                `;
            }
            
            container.insertAdjacentHTML('beforeend', questionHTML);
            questions.push({ id: qId, type: type });
            showToast('Question added');
        }

        function removeQuestion(qId) {
            document.getElementById(`question-${qId}`).remove();
            questions = questions.filter(q => q.id !== qId);
            showToast('Question removed');
        }

        // Flashcard Functions
        function addFlashcard() {
            const container = document.getElementById('flashcardsContainer');
            const cardId = Date.now();
            
            const cardHTML = `
                <div class="content-block" id="flashcard-${cardId}">
                    <div class="flex-between mb-20">
                        <strong>Card #${flashcards.length + 1}</strong>
                        <button class="btn btn-sm btn-outline" onclick="removeFlashcard(${cardId})">Remove</button>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label class="form-label">Front (Question)</label>
                            <textarea class="form-input" rows="3" placeholder="Enter front content"></textarea>
                            <button class="btn btn-sm btn-outline mt-20" style="width: 100%;">üñºÔ∏è Add Image</button>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Back (Answer)</label>
                            <textarea class="form-input" rows="3" placeholder="Enter back content"></textarea>
                            <button class="btn btn-sm btn-outline mt-20" style="width: 100%;">üéµ Add Audio</button>
                        </div>
                    </div>
                </div>
            `;
            
            container.insertAdjacentHTML('beforeend', cardHTML);
            flashcards.push({ id: cardId });
            showToast('Flashcard added');
        }

        function removeFlashcard(cardId) {
            document.getElementById(`flashcard-${cardId}`).remove();
            flashcards = flashcards.filter(f => f.id !== cardId);
            showToast('Flashcard removed');
        }

        // Assignment Functions
        function initializeAssignments() {
            updateAssignmentOptions();
            renderAssignmentsTable();
            renderStudentAccommodations();
        }

        function updateAssignmentOptions() {
            const type = document.getElementById('assignmentType').value;
            const select = document.getElementById('assignmentContent');
            
            let options = '';
            if (type === 'lesson') {
                options = lessons.map(l => `<option value="${l.id}">${l.title}</option>`).join('');
            } else if (type === 'quiz') {
                options = quizzes.map(q => `<option value="${q.id}">${q.title}</option>`).join('');
            } else if (type === 'flashcard') {
                options = flashcardSets.map(f => `<option value="${f.id}">${f.name}</option>`).join('');
            }
            
            select.innerHTML = options;
        }

        function renderStudentAccommodations() {
            const container = document.getElementById('studentAccommodationsList');
            const selectedStudents = students.slice(0, 5); // Show subset for demo
            
            container.innerHTML = selectedStudents.map(student => `
                <div style="background: var(--background); padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                    <div style="font-weight: 600; margin-bottom: 10px;">${student.name}</div>
                    <select class="form-input" id="accommodation-${student.id}">
                        <option value="">No accommodations</option>
                        ${accommodationTypes.map(acc => `<option value="${acc}" ${student.accommodations.includes(acc) ? 'selected' : ''}>${acc}</option>`).join('')}
                    </select>
                </div>
            `).join('');
        }

        function renderAssignmentsTable() {
            const table = document.getElementById('assignmentsTable');
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Type</th>
                        <th>Class</th>
                        <th>Due Date</th>
                        <th>Status</th>
                        <th>Completion</th>
                    </tr>
                </thead>
                <tbody>
                    ${assignments.map(a => `
                        <tr>
                            <td>${a.title}</td>
                            <td><span class="badge badge-info">${a.type}</span></td>
                            <td>${a.class}</td>
                            <td>${a.dueDate}</td>
                            <td><span class="badge ${a.status === 'Completed' ? 'badge-success' : a.status === 'In Progress' ? 'badge-warning' : 'badge-danger'}">${a.status}</span></td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${a.completion}%;"></div>
                                </div>
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            `;
        }

        // Progress Tracking
        function initializeProgress() {
            renderStudentProgress();
        }

        function renderStudentProgress() {
            const grid = document.getElementById('studentProgressGrid');
            const progressStudents = students.slice(0, 8);
            
            grid.innerHTML = progressStudents.map(student => {
                const status = student.avgGrade >= 90 ? 'green' : student.avgGrade >= 80 ? 'yellow' : 'red';
                return `
                    <div class="student-card status-${status}" onclick="viewStudentDetail('${student.id}')">
                        <div class="student-name">${student.name}</div>
                        <div class="student-stats">
                            <div>üìä Grade: ${student.avgGrade}%</div>
                            <div>‚úì ${student.completionRate}% complete</div>
                        </div>
                        ${student.accommodations.length > 0 ? `
                            <div style="margin-top: 10px;">
                                <span class="badge badge-info" style="font-size: 11px;">${student.accommodations[0]}</span>
                            </div>
                        ` : ''}
                        <div class="progress-bar" style="margin-top: 10px;">
                            <div class="progress-fill" style="width: ${student.completionRate}%;"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function filterProgress() {
            renderStudentProgress();
            showToast('Filters applied');
        }

        function viewStudentDetail(studentId) {
            const student = students.find(s => s.id === studentId);
            openModal('studentDetailModal');
            showToast(`Viewing details for ${student.name}`);
        }

        // Real-time Monitoring
        function initializeMonitoring() {
            const grid = document.getElementById('monitorGrid');
            const activeStudents = students.slice(0, 12);
            
            grid.innerHTML = activeStudents.map(student => {
                const statuses = ['active', 'idle', 'struggling'];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const activities = ['Working on Algebra Quiz', 'Watching Video Lesson', 'Reading Assignment', 'Completed Exercise'];
                const activity = activities[Math.floor(Math.random() * activities.length)];
                
                return `
                    <div class="monitor-card" onclick="viewStudentLive('${student.id}')">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                            <span class="status-indicator status-${status}"></span>
                            <strong>${student.name}</strong>
                        </div>
                        <div style="font-size: 12px; color: var(--text-light); margin-bottom: 5px;">${activity}</div>
                        <div style="font-size: 11px; color: var(--text-light);">‚è±Ô∏è ${Math.floor(Math.random() * 45 + 5)} min</div>
                    </div>
                `;
            }).join('');
        }

        function refreshMonitoring() {
            initializeMonitoring();
            showToast('Monitoring data refreshed');
        }

        function viewStudentLive(studentId) {
            const student = students.find(s => s.id === studentId);
            showToast(`Viewing live activity for ${student.name}`);
        }

        // Reports
        function initializeReports() {
            generateReport();
        }

        function generateReport() {
            const content = document.getElementById('reportContent');
            content.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="margin-bottom: 20px;">Math 7A - Class Performance</h3>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Class Average</div>
                            <div class="stat-value">87%</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Assignment Completion</div>
                            <div class="stat-value">93%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Students at Risk</div>
                            <div class="stat-value">2</div>
                        </div>
                    </div>

                    <h4 style="margin: 30px 0 15px;">Performance by Assignment</h4>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Assignment</th>
                                    <th>Average Score</th>
                                    <th>Completion Rate</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Algebra Basics Quiz</td>
                                    <td>85%</td>
                                    <td>100%</td>
                                    <td><span class="badge badge-success">Completed</span></td>
                                </tr>
                                <tr>
                                    <td>Introduction to Variables</td>
                                    <td>88%</td>
                                    <td>92%</td>
                                    <td><span class="badge badge-warning">In Progress</span></td>
                                </tr>
                                <tr>
                                    <td>Practice Problems Set 1</td>
                                    <td>90%</td>
                                    <td>87%</td>
                                    <td><span class="badge badge-warning">In Progress</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            showToast('Report generated successfully');
        }

        function exportReport(format) {
            showToast(`Report exported as ${format.toUpperCase()}`);
        }

        function shareReport() {
            showToast('Report shared with parents');
        }

        // Student Dashboard
        function initializeStudentDashboard() {
            const assignmentsList = document.getElementById('studentAssignmentsList');
            assignmentsList.innerHTML = assignments.slice(0, 3).map(a => `
                <div style="padding: 15px; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <strong>${a.title}</strong>
                        <span class="badge ${a.status === 'Completed' ? 'badge-success' : 'badge-warning'}">${a.status}</span>
                    </div>
                    <div style="font-size: 13px; color: var(--text-light); margin-bottom: 8px;">
                        üìÖ Due: ${a.dueDate}
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${a.completion}%;"></div>
                    </div>
                </div>
            `).join('');

            const progressBars = document.getElementById('studentProgressBars');
            progressBars.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 14px;">Mathematics</span>
                        <span style="font-size: 14px; font-weight: 600;">85%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 85%;"></div>
                    </div>
                </div>
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 14px;">Assignments</span>
                        <span style="font-size: 14px; font-weight: 600;">92%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 92%;"></div>
                    </div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 14px;">Overall</span>
                        <span style="font-size: 14px; font-weight: 600;">88%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 88%;"></div>
                    </div>
                </div>
            `;
        }

        // Student Interaction Functions
        function selectAnswer(element, answer) {
            document.querySelectorAll('.answer-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
        }

        function submitQuiz() {
            showToast('Quiz submitted successfully!');
            navigateTo('studentDashboard');
        }

        function flipCard() {
            document.getElementById('flashcardInner').classList.toggle('flipped');
        }

        function prevFlashcard() {
            document.getElementById('flashcardInner').classList.remove('flipped');
            showToast('Previous card');
        }

        function nextFlashcard() {
            document.getElementById('flashcardInner').classList.remove('flipped');
            showToast('Next card');
        }

        function shuffleFlashcards() {
            showToast('Deck shuffled');
        }

        function markMastered() {
            showToast('Card marked as mastered');
            nextFlashcard();
        }

        function markLessonComplete() {
            showToast('Lesson marked as complete!');
        }

        function askTeacher() {
            showToast('Question sent to teacher');
        }

        // Action Functions
        function previewLesson() {
            showToast('Opening lesson preview...');
        }

        function saveDraft() {
            showToast('Lesson saved as draft');
        }

        function publishLesson() {
            showToast('Lesson published successfully!');
        }

        function importMaterials() {
            showToast('File upload dialog opened');
        }

        function previewQuiz() {
            showToast('Opening quiz preview...');
        }

        function publishQuiz() {
            showToast('Quiz published successfully!');
        }

        function publishFlashcards() {
            showToast('Flashcard set published!');
        }

        function assignWork() {
            showToast('Assignment created and distributed!');
            renderAssignmentsTable();
        }

        function viewClass(classId) {
            const cls = classes.find(c => c.id === classId);
            showToast(`Viewing ${cls.name}`);
        }

        function editClass(classId) {
            const cls = classes.find(c => c.id === classId);
            showToast(`Editing ${cls.name}`);
        }

        function createClass() {
            showToast('Class created successfully!');
            closeModal('createClassModal');
            initializeClasses();
        }

        function saveAccommodations() {
            showToast('Accommodations saved');
            closeModal('accommodationsModal');
        }

        // Modal Functions
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                
                // Populate accommodations modal if needed
                if (modalId === 'accommodationsModal') {
                    const list = document.getElementById('accommodationsStudentList');
                    list.innerHTML = students.slice(0, 5).map(student => `
                        <div style="background: var(--background); padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                            <div style="font-weight: 600; margin-bottom: 10px;">${student.name}</div>
                            ${accommodationTypes.map(acc => `
                                <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                    <input type="checkbox" ${student.accommodations.includes(acc) ? 'checked' : ''}>
                                    <span style="font-size: 14px;">${acc}</span>
                                </label>
                            `).join('')}
                        </div>
                    `).join('');
                }
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Toast Notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Mobile Menu
        function toggleMobileMenu() {
            document.getElementById('sidebar').classList.toggle('mobile-open');
        }

        // Close modals on outside click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });

        // Initialize on load
        window.addEventListener('load', function() {
            // Set default date for assignments
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const dateInput = document.getElementById('assignmentDueDate');
            if (dateInput) {
                dateInput.value = tomorrow.toISOString().split('T')[0];
            }
        });
    </script>
</body>
</html>